<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>KML</title>
    <style>
      .map {
        width: 100%;
        height: 400px;
      }
    </style>
    <script type="text/javascript" src="/js/jquery-3.6.3.min.js"></script>
    <script type="text/javascript" src="/ol/dist/ol.js"></script>
    <link rel="stylesheet" type="text/css" href="/ol/ol.css">
    <script type="text/javascript">
   		$(document).ready(function() {
   			const key = 'aHyqnlpCDhwjzbtKnXvq';
   			const attributions =
   			  '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> ' +
   			  '<a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>';

   			const raster = new ol.layer.Tile({
   			  source: new ol.source.XYZ({
   			    attributions: attributions,
   			    url: 'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=' + key,
   			    maxZoom: 20,
   			  }),
   			});

   			const vector = new ol.layer.Vector({
   			  source: new ol.source.Vector({
   			    url: 'https://openlayers.org/en/latest/examples/data/kml/2012-02-10.kml',
   			    format: new ol.format.KML(),
   			  }),
   			});

   			const map = new ol.Map({
   			  layers: [raster, vector],
   			  target: document.getElementById('map'),
   			  view: new ol.View({
   			    center: [876970.8463461736, 5859807.853963373],
   			    projection: 'EPSG:3857',
   			    zoom: 10,
   			  }),
   			});

   			const displayFeatureInfo = function (pixel) {
   			  const features = [];
   			  map.forEachFeatureAtPixel(pixel, function (feature) {
   			    features.push(feature);
   			  });
   			  if (features.length > 0) {
   			    const info = [];
   			    let i, ii;
   			    for (i = 0, ii = features.length; i < ii; ++i) {
   			      info.push(features[i].get('name'));
   			    }
   			    document.getElementById('info').innerHTML = info.join(', ') || '(unknown)';
   			    map.getTarget().style.cursor = 'pointer';
   			  } else {
   			    document.getElementById('info').innerHTML = '&nbsp;';
   			    map.getTarget().style.cursor = '';
   			  }
   			};

   			map.on('pointermove', function (evt) {
   			  if (evt.dragging) {
   			    return;
   			  }
   			  const pixel = map.getEventPixel(evt.originalEvent);
   			  displayFeatureInfo(pixel);
   			});

   			map.on('click', function (evt) {
   			  displayFeatureInfo(evt.pixel);
   			});
		});
    </script>
  </head>
  <body>
  	<h2>KML</h2>
  	<h5>(주)이쓰리 이대교 주임</h5>
    <div id="map" class="map"></div>
     <div id="info">&nbsp;</div>
  </body>
</html>